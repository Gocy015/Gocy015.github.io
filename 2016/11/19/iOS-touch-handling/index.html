<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"blog.gocy.tech","root":"/","images":"/images","scheme":"Muse","version":"8.2.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"}};
  </script>
<meta name="description" content="å‰è¨€è¿™ä¸¤å¤©åœ¨å®ç°æˆ‘çš„åŠ¨ç”»åº“Demoçš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°ä¸€ä¸ªä»¤æˆ‘æœ‰äº›ç–‘æƒ‘çš„é—®é¢˜ï¼šåœ¨parentViewä¸Šæ·»åŠ äº†UITapGestureRecognizerä¹‹åï¼Œsubviewä¸­çš„UITableViewå®ä¾‹æ— æ³•æ­£å¸¸å“åº”ç‚¹å‡»äº‹ä»¶äº†ï¼Œä½†UIButtonå®ä¾‹ä»å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œç»è¿‡ä¸€ç³»åˆ—æŸ¥é˜…èµ„æ–™å’Œå®éªŒï¼Œç»ˆäºç†è§£äº†è¿™æ˜¯æ€ä¹ˆä¸€å›äº‹ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="iOSè§¦æ‘¸äº‹ä»¶é‚£ç‚¹å„¿äº‹">
<meta property="og:url" content="https://blog.gocy.tech/2016/11/19/iOS-touch-handling/index.html">
<meta property="og:site_name" content="Gocy&#39;s home page">
<meta property="og:description" content="å‰è¨€è¿™ä¸¤å¤©åœ¨å®ç°æˆ‘çš„åŠ¨ç”»åº“Demoçš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°ä¸€ä¸ªä»¤æˆ‘æœ‰äº›ç–‘æƒ‘çš„é—®é¢˜ï¼šåœ¨parentViewä¸Šæ·»åŠ äº†UITapGestureRecognizerä¹‹åï¼Œsubviewä¸­çš„UITableViewå®ä¾‹æ— æ³•æ­£å¸¸å“åº”ç‚¹å‡»äº‹ä»¶äº†ï¼Œä½†UIButtonå®ä¾‹ä»å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œç»è¿‡ä¸€ç³»åˆ—æŸ¥é˜…èµ„æ–™å’Œå®éªŒï¼Œç»ˆäºç†è§£äº†è¿™æ˜¯æ€ä¹ˆä¸€å›äº‹ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2016-11-19T07:26:36.000Z">
<meta property="article:modified_time" content="2017-12-29T10:20:16.000Z">
<meta property="article:author" content="Gocy">
<meta property="article:tag" content="iOS">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://blog.gocy.tech/2016/11/19/iOS-touch-handling/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>
<title>iOSè§¦æ‘¸äº‹ä»¶é‚£ç‚¹å„¿äº‹ | Gocy's home page</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Gocy's home page</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">æŠŠçƒ­çˆ±çš„äº‹æƒ…åšå¥½</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">å‰è¨€</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iOS%E4%B8%AD%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91"><span class="nav-number">2.</span> <span class="nav-text">iOSä¸­çš„äº‹ä»¶åˆ†å‘</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%8B%E5%8A%BF%E8%AF%86%E5%88%AB%E7%A7%B0%E5%A4%A7%E7%8E%8B"><span class="nav-number">3.</span> <span class="nav-text">æ‰‹åŠ¿è¯†åˆ«ç§°å¤§ç‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UIControl%E7%9A%84%E9%AD%94%E5%8A%9B"><span class="nav-number">4.</span> <span class="nav-text">UIControlçš„é­”åŠ›</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%90%86%E6%B8%85%E5%A4%B4%E7%BB%AA"><span class="nav-number">5.</span> <span class="nav-text">ç†æ¸…å¤´ç»ª</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Gocy</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">27</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.gocy.tech/2016/11/19/iOS-touch-handling/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Gocy">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Gocy's home page">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          iOSè§¦æ‘¸äº‹ä»¶é‚£ç‚¹å„¿äº‹
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2016-11-19 15:26:36" itemprop="dateCreated datePublished" datetime="2016-11-19T15:26:36+08:00">2016-11-19</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">æ›´æ–°äº</span>
        <time title="ä¿®æ”¹æ—¶é—´ï¼š2017-12-29 18:20:16" itemprop="dateModified" datetime="2017-12-29T18:20:16+08:00">2017-12-29</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>è¿™ä¸¤å¤©åœ¨å®ç°æˆ‘çš„<a target="_blank" rel="noopener" href="https://github.com/Gocy015/MotionExperiment">åŠ¨ç”»åº“Demo</a>çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°ä¸€ä¸ªä»¤æˆ‘æœ‰äº›ç–‘æƒ‘çš„é—®é¢˜ï¼šåœ¨<code>parentView</code>ä¸Šæ·»åŠ äº†<code>UITapGestureRecognizer</code>ä¹‹åï¼Œ<code>subview</code>ä¸­çš„<code>UITableView</code>å®ä¾‹æ— æ³•æ­£å¸¸å“åº”ç‚¹å‡»äº‹ä»¶äº†ï¼Œä½†<code>UIButton</code>å®ä¾‹ä»å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œç»è¿‡ä¸€ç³»åˆ—æŸ¥é˜…èµ„æ–™å’Œå®éªŒï¼Œç»ˆäºç†è§£äº†è¿™æ˜¯æ€ä¹ˆä¸€å›äº‹ã€‚</p>
<a id="more"></a>


<h3 id="iOSä¸­çš„äº‹ä»¶åˆ†å‘"><a href="#iOSä¸­çš„äº‹ä»¶åˆ†å‘" class="headerlink" title="iOSä¸­çš„äº‹ä»¶åˆ†å‘"></a>iOSä¸­çš„äº‹ä»¶åˆ†å‘</h3><p><del>ä¸‹é¢è¿™ä¸¤å¼ å›¾ç›¸ä¿¡å¤§å®¶éƒ½å·²ç»çœ‹è¿‡æ— æ•°éäº†ï¼š</del><br>æ—§çš„ UIResponder å“åº”é“¾é“¾æ¥å·²ç»å¤±æ•ˆäº†ï¼Œè‹¹æœæ–‡æ¡£æŠŠå›¾ç‰‡æ¢æˆäº†è¿™æ ·ï¼š</p>
<p><img src = 'https://docs-assets.developer.apple.com/published/7c21d852b9/f17df5bc-d80b-4e17-81cf-4277b1e0f6e4.png' width = 660 align='middle'></img></p>
<p><del>è¿™ä¸¤å¹…æ¥è‡ªäº<a target="_blank" rel="noopener" href="https://developer.apple.com/library/content/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/event_delivery_responder_chain/event_delivery_responder_chain.html#//apple_ref/doc/uid/TP40009541-CH4-SW2">Appleå®˜æ–¹æ–‡æ¡£</a>çš„å›¾è¯ é‡Šäº†<code>UIResponder</code>é“¾å¼åˆ†å‘/å“åº”äº‹ä»¶çš„æ•´ä¸ªæµç¨‹ï¼Œå½“è§¦æ‘¸äº‹ä»¶ç”±ç³»ç»Ÿä¼ ç»™<code>UIApplication</code>å•ä¾‹åï¼Œäº‹ä»¶ä»æœ€<strong>åº•å±‚</strong>çš„<code>ParentView</code>ä¸€å±‚ä¸€å±‚åµŒå¥—ä¼ é€’ç»™<code>Subviews</code>ï¼Œæœ€ç»ˆå¾—åˆ°çš„å¯ä»¥å“åº”è¯¥äº‹ä»¶çš„<code>targetView</code>ï¼Œå†åå‘å‘ä¸Šè¯·æ±‚å¤„ç†ã€‚</del></p>
<p>ä¸Šå›¾è§£é‡Šäº† UIResponder äº‹ä»¶å¤„ç†é“¾çš„å…³ç³»ï¼Œè€Œå…¶æ—¶é—´åˆ†å‘è¿‡ç¨‹ï¼Œå¯ä»¥å‚çœ‹ <a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/uikit/touches_presses_and_gestures/understanding_event_handling_responders_and_the_responder_chain">å®˜æ–¹æ–‡æ¡£</a> ä¸­çš„ â€œDetermining Which Responder Contained a Touch Eventâ€ éƒ¨åˆ†ã€‚ç®€å•çš„è¯´ï¼Œå½“ç‚¹å‡»äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œç³»ç»Ÿä»é¡¶å±‚ View å¼€å§‹ï¼ˆé€šå¸¸æ˜¯åº”ç”¨çš„é¡¶å±‚ <code>UIWindow</code>ï¼‰ï¼Œé€šè¿‡åˆ¤æ–­ç‚¹å‡»åæ ‡æ˜¯å¦è½åœ¨è§†å›¾çš„ <code>frame</code> ä¹‹ä¸­æ¥å†³å®šæ˜¯å¦å°†è¯¥ç‚¹å‡»äº‹ä»¶äº¤ç”±è¯¥è§†å›¾å¤„ç†ï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹å°†ä¼šä»é¡¶å±‚è§†å›¾é€’å½’å‘ä¸‹æ‰¾åˆ°æœ€å†…éƒ¨çš„å­è§†å›¾ï¼Œè¿™ä¸ªè¿‡ç¨‹/æ–¹æ³•ä¹Ÿå°±æ˜¯ <code>hitTest</code> çš„è¿‡ç¨‹ã€‚æ‰¾åˆ°æœ€åº•å±‚è§†å›¾ä¹‹åï¼Œåˆ™ä¼šå°è¯•è®©å…¶å¤„ç†è¿™ä¸ªäº‹ä»¶ï¼ˆ<code>UIControl</code> çš„å„ç§äº‹ä»¶ã€<code>UIGestureRecognizer</code> ç­‰ï¼‰ï¼Œè‹¥å…¶æ— æ³•å¤„ç†ï¼Œåˆ™æ²¿ç€å›¾ä¸­çš„å“åº”é“¾ä¸€æ­¥æ­¥å†å‘ä¸Šå¯»æ‰¾ã€‚</p>
<blockquote>
<p><em>è¿™äº›æˆ‘äº†ç„¶äºèƒ¸ï¼Œæ‰€ä»¥æˆ‘è‡ªä¿¡çš„è®¤ä¸ºï¼Œåªè¦å­è§†å›¾æœ‰å¤„ç†äº‹ä»¶çš„èƒ½åŠ›ï¼Œé‚£ä¹ˆè‡ªç„¶ä¼šè¦†ç›–æ‰çˆ¶è§†å›¾çš„å¤„ç†é€»è¾‘ã€‚</em></p>
</blockquote>
<p>äºæ˜¯å½“æˆ‘è‡ªä¿¡æ»¡æ»¡çš„å†™å®Œdemoï¼Œç‹ ç‹ åœ°é€‰ä¸­<code>tableView cell</code>çš„æ—¶å€™ï¼š</p>
<p><img src = '/images/TouchEventHandling/bgTapped.jpeg' width = 320></img></p>
<p>æ§åˆ¶å°è¾“å‡ºäº†å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">MotionExperiments</span>[<span class="number">5136</span>:<span class="number">328131</span>] <span class="type">Background</span> was tapped <span class="operator">!</span></span><br></pre></td></tr></table></figure>

<p><img src = '/images/TouchEventHandling/exme.jpeg' width = 120></img></p>
<h3 id="æ‰‹åŠ¿è¯†åˆ«ç§°å¤§ç‹"><a href="#æ‰‹åŠ¿è¯†åˆ«ç§°å¤§ç‹" class="headerlink" title="æ‰‹åŠ¿è¯†åˆ«ç§°å¤§ç‹"></a>æ‰‹åŠ¿è¯†åˆ«ç§°å¤§ç‹</h3><p>æŸ¥äº†ä¸€ç•ªè§£å†³æ–¹æ¡ˆåï¼Œåœ¨æ ˆæº¢å‡ºæ‰¾åˆ°äº†<a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/8192480/uitapgesturerecognizer-breaks-uitableview-didselectrowatindexpath">è¿™ä¹ˆä¸€ç¯‡å›ç­”</a>ï¼Œçœ‹åˆ°ä¹‹åæˆ‘å…¶å®æ˜¯å´©æºƒçš„ï¼Œæ„æ€æ˜¯æˆ‘æƒ³å†™ä¸ªé€šç”¨çš„åŸºäº<code>UITableView</code>çš„ç»„ä»¶ï¼Œè¿˜å¾—åœ¨æ¯ä¸ªæœ‰<code>UIGestureRecognizer</code>çš„è§†å›¾ä¸­åŠ å…¥<code>delegate</code>æ¥è§„é¿æ‰‹åŠ¿å†²çªğŸ˜¨ã€‚</p>
<p>å°½ç®¡åƒç™¾ä¸ªä¸æ„¿æ„ï¼Œä½†æ­£æ˜¯è¿™ä¸ªåœ¨<code>ParentView</code>ä¸Šçš„<code>tap</code>æ‰‹åŠ¿ï¼Œå¯¼è‡´äº†æˆ‘çš„<code>tableView</code>æ‰‹åŠ¿è¯†åˆ«çš„å¼‚å¸¸ï¼Œæ‰€ä»¥åªå¥½é€šè¿‡å®ç°</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">gestureRecognizer</span><span class="params">(<span class="keyword">_</span> gestureRecognizer: UIGestureRecognizer, shouldReceive touch: UITouch)</span></span> -&gt; <span class="type">Bool</span> </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æ¥è§£å†³è¿™ä¸ªå†²çªã€‚</p>
<p><del>éšåï¼Œæˆ‘åˆåœ¨<a target="_blank" rel="noopener" href="https://developer.apple.com/library/content/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizer_basics/GestureRecognizer_basics.html">å®˜æ–¹æ–‡æ¡£</a>ä¸­æ‰¾åˆ°äº†å¦‚ä¸‹å†…å®¹ï¼š</del><br><del>(æ–‡æ¡£ç›´æ¥è´´ä¸Šæ¥æœ‰ç‚¹é•¿ï¼Œå¤§è‡´æ„ä¹‰å¦‚ä¸‹)</del></p>
<p><em>è‹¹æœå®˜æ–¹åˆæŠŠæ–‡æ¡£ç»™åˆ äº†</em></p>
<p>åœ¨ <a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/uikit/uigesturerecognizer">UIGestureRecognizer çš„æ–‡æ¡£ä¸­</a>ï¼Œæœ‰è¿™ä¹ˆä¸€æ®µè¯ï¼š</p>
<blockquote>
<p>A window delivers touch events to a gesture recognizer before it delivers them to the hit-tested view attached to the gesture recognizer.(Blah..Blah..Blah..) If a gesture recognizer recognizes its gesture, the remaining touches for the view are cancelled.</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯†åˆ«ä¸€ä¸ªè§¦æ‘¸äº‹ä»¶çš„æ—¶å€™ï¼Œæ‰‹åŠ¿è¯†åˆ«å°†<strong>ä¼˜å…ˆ</strong>äº<code>UIResponder</code>å“åº”é“¾å¼æœºåˆ¶ï¼Œè€Œå…·ä½“ä½“ç°ä¸ºï¼š<br>1.æ‰‹åŠ¿è¯†åˆ«å¼€å§‹ã€å˜åŒ–çš„è¿‡ç¨‹ï¼Œ<code>gestureRecognizer</code>ä¸<code>touchesBegan</code>,<code>touchesMoved</code>åŒæ—¶å¤„ç†å“åº”äº‹ä»¶ã€‚</p>
<p>2.<strong>ä½†æ˜¯</strong>ï¼Œåªæœ‰åœ¨<code>gestureRecognizer</code>åˆ¤å®šå¤±è´¥çš„æ—¶å€™(è­¬å¦‚ä¸€ä¸ª<code>tapGestureRegcognizer</code>é‡åˆ°äº†ä¸€ä¸ª<code>swipe</code>æ‰‹åŠ¿)ï¼Œç³»ç»Ÿæ‰ä¼šè§¦å‘<code>UIResponder</code>å“åº”é“¾ä¸­çš„<code>touchesEnded</code>ï¼Œå¦åˆ™ï¼Œä¼šè§¦å‘<code>touchesCancelled</code>ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªæ‰‹åŠ¿æ˜¯å¦èƒ½<strong>å®Œæ•´</strong>åœ°ä»<code>UIResponder</code>å“åº”é“¾ä¸­ä¼ é€’å®Œæˆï¼Œä¸»è¦å–å†³äº<code>gestrueRecognizer</code>æ˜¯å¦â€æ„¿æ„â€è¿™ä¹ˆåšã€‚</p>
<blockquote>
<p><em>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰‹åŠ¿è¯†åˆ«å™¨æ‹¥æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œåªæœ‰è‡ªå·±ç©å‰©ä¸‹çš„æ‰ä¼ ç»™<code>UIResponder</code>å“åº”é“¾å¤„ç†ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®<code>cancelsTouchesInView</code>æ¥å¼ºåˆ¶ä½¿è§¦æ‘¸æµç¨‹æ‰§è¡Œå“åº”é“¾æµç¨‹ï¼Œä½†è¿™ä»æ”¹å˜ä¸äº†æ‰‹åŠ¿è¯†åˆ«å™¨æ‹¥æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„äº‹å®ã€‚</em></p>
</blockquote>
<p>æ¥ä¸‹æ¥éªŒè¯ä¸€ä¸‹é€šè¿‡æ–‡æ¡£æ€»ç»“å‡ºçš„ç»“è®ºï¼Œçœ‹çœ‹è¿™ä¸ªDemo:<br><img src = '/images/TouchEventHandling/tableDemo.jpeg' width = 320></img></p>
<p>å…¶ä¸­é’è“è‰²çš„èƒŒæ™¯æ˜¯<code>ParentView</code>ï¼Œæˆ‘ä¸ºå®ƒæ·»åŠ äº†ä¸€ä¸ª<code>UITapGestureRecognizer</code>ï¼Œè€Œ<code>TableView</code>æ˜¯å®ƒçš„å­è§†å›¾ï¼Œæˆ‘é‡å†™äº†<code>touchesBegan</code>/<code>touchesMoved</code>ç­‰å…±å››ä¸ªç›¸åº”çš„è§¦æ‘¸å“åº”å‡½æ•°ç”¨æ¥åšæ§åˆ¶å°è¾“å‡ºã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘å¯¹ç€<code>TableView</code>è¿›è¡Œå¦‚ä¸‹ä¸‰ä¸ªæ“ä½œï¼š</p>
<p>1.å•å‡»ï¼Œå°±å¦‚åŒæˆ‘æ‰“ç®—æ­£å¸¸çš„é€‰ä¸­æŸä¸€è¡Œä¸€æ ·ï¼Œå¯¹åº”æ§åˆ¶å°è¾“å‡ºï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">EventHandlingTest</span>[<span class="number">5386</span>:<span class="number">361029</span>] <span class="type">Background</span> <span class="type">Tap</span> </span><br></pre></td></tr></table></figure>

<p>2.çŸ­æŒ‰ï¼Œå³æŒ‰ä½ä¸€å°ä¼šå„¿åæ¾å¼€ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">EventHandlingTest</span>[<span class="number">5386</span>:<span class="number">361029</span>] touches began</span><br><span class="line"><span class="type">EventHandlingTest</span>[<span class="number">5386</span>:<span class="number">361029</span>] <span class="type">Background</span> <span class="type">Tap</span></span><br><span class="line"><span class="type">EventHandlingTest</span>[<span class="number">5386</span>:<span class="number">361029</span>] touches cancelled</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>3.é•¿æŒ‰å†æ¾å¼€ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">EventHandlingTest</span>[<span class="number">5386</span>:<span class="number">361029</span>] touches began </span><br><span class="line"><span class="type">EventHandlingTest</span>[<span class="number">5386</span>:<span class="number">361029</span>] touches ended</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="UIControlçš„é­”åŠ›"><a href="#UIControlçš„é­”åŠ›" class="headerlink" title="UIControlçš„é­”åŠ›"></a>UIControlçš„é­”åŠ›</h3><p>ç»è¿‡ä¸Šé¢çš„â€œç ”ç©¶â€ï¼Œæˆ‘ä»¬å·²ç»æ˜ç™½ï¼Œ<code>UIGestureRecognizer</code>å¹¶ä¸æŒ‰å¥—è·¯å‡ºç‰Œï¼Œ<code>View</code>çš„çˆ¶å­å…³ç³»ä¸å½±å“å…¶äº‹ä»¶å¤„ç†ï¼Œä½†ä¸ºä»€ä¹ˆæˆ‘çš„<code>UIButton</code>å°±å¯ä»¥æ­£å¸¸å·¥ä½œå‘¢ï¼Ÿ</p>
<blockquote>
<p><em>ä»¥ä¸Šè¡¨è¿°ä»…é€‚ç”¨äºå­è§†å›¾æ²¡æœ‰ç›¸åŒçš„æ‰‹åŠ¿è¯†åˆ«å™¨çš„æƒ…å†µï¼Œè‹¥<code>ParentView</code>å’Œ<code>Subview</code>åŒæ—¶æœ‰ä¸€ä¸ªç›¸åŒçš„<code>UIGestureRecognizer</code>å­ç±»ï¼Œåˆ™<code>Subview</code>å“åº”äº‹ä»¶ä¼šè¦†ç›–<code>ParentView</code></em></p>
</blockquote>
<p>æˆ‘åˆåœ¨<a target="_blank" rel="noopener" href="https://developer.apple.com/reference/uikit/uicontrol">å®˜æ–¹æ–‡æ¡£</a>æ‰¾åˆ°äº†å¦‚ä¸‹å†…å®¹ï¼š</p>
<p><strong>When a control-specific event occurs, the control calls any associated action methods right away. Action methods are dispatched through the current UIApplication object, which finds an appropriate object to handle the message, following the responder chain if needed.</strong></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ª<code>UIControl</code>å­ç±»(<code>UIButton</code>/<code>UISwitch</code>)æ–¹æ³•ï¼Œå…¶å“åº”äº‹ä»¶çš„æ–¹å¼ä¸åŒäºæ™®é€šçš„<code>UIView</code>ï¼Œå®ƒä»¬çš„äº‹ä»¶å¤„ç†ç”±<code>UIApplication</code>å•ä¾‹ç›´æ¥æ§åˆ¶ï¼å°½ç®¡æ–‡æ¡£ä¸­æåˆ°å…¶<strong>äº‹ä»¶å¤„ç†</strong>éƒ¨åˆ†ä»å¯èƒ½ä½¿ç”¨<code>UIResponder</code>å“åº”é“¾é€»è¾‘ï¼Œä½†å…¶<strong>äº‹ä»¶åˆ†å‘</strong>ä¸æ™®é€šçš„<code>UIView</code>å®Œå…¨ä¸åŒã€‚</p>
<p>æˆ‘ä»¬å†çœ‹ä¸€ä¸ªDemo:</p>
<p><img src = '/images/TouchEventHandling/touchDemo.jpeg' width = 320></img></p>
<p>å’Œå‰é¢çš„Demoç±»ä¼¼ï¼Œä¸è¿‡æ­¤å¤„åŠ å…¥äº†ä¸€ä¸ªæ©™è‰²çš„<code>UIButton</code>,æ­¤å¤„<code>TableView</code>å’Œ<code>Button</code>æ˜¯åŒå±‚çº§çš„ï¼Œå‡ä¸ºé’è“è‰²<code>ParentView</code>çš„å­è§†å›¾ï¼ŒåŒæ ·ï¼Œæˆ‘é‡å†™äº†<code>Button</code>çš„<code>touchesBegan</code>ç­‰ä¸€ç³»åˆ—æ–¹æ³•ã€‚</p>
<p>ä¸å‰ä¸€ä¸ªTableView Demoä¸åŒï¼Œæˆ‘<strong>å•å‡»</strong><code>Button</code>åï¼Œä¾¿ç«‹åˆ»æ¥åˆ°äº†<code>touchesBegan</code>ä¸­(è€Œä¸æ˜¯çŸ­æŒ‰)ï¼Œæ­¤æ—¶ï¼Œå¯¹æ¯”ä¸€ä¸‹è¿›å…¥<code>touchesBegan</code>çš„æ—¶å€™çš„<code>Button</code>å’Œ<code>TableView</code>çš„è°ƒç”¨æ ˆï¼š</p>
<p><code>Button</code>:</p>
<img src = '/images/TouchEventHandling/btnStack.jpeg' width = 422>


<p><code>TableView</code>:</p>
<img src = '/images/TouchEventHandling/tableStack.jpeg' width = 422>

<p>å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼Œ<code>Button</code>çš„äº‹ä»¶ç›´æ¥å°±ç”±<code>UIApplication</code>ä¼ é€’è¿‡æ¥äº†ï¼Œè€Œ<code>TableView</code>èµ°çš„æ˜¯æ­£å¸¸çš„å“åº”é“¾ï¼Œç»è¿‡äº†æ•°æ¬¡çš„æ¶ˆæ¯è½¬å‘ã€‚æ³¨æ„<code>TableView</code>è°ƒç”¨æ ˆçº¢æ¡†åº•éƒ¨å¤–çš„ç¬¬ä¸€æ¡è°ƒç”¨:<code>_UIGestureEnvironmentSortAndSendDelayedTouches () </code>ï¼Œä»å‘½åä¸Šæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œ<code>TableView</code>çš„ç‚¹å‡»äº‹ä»¶æ˜¯è¢«å»¶è¿Ÿå‘é€çš„ã€‚</p>
<h3 id="ç†æ¸…å¤´ç»ª"><a href="#ç†æ¸…å¤´ç»ª" class="headerlink" title="ç†æ¸…å¤´ç»ª"></a>ç†æ¸…å¤´ç»ª</h3><p>ç»è¿‡ä¸Šé¢çš„æ¢ç´¢ï¼Œæˆ‘ä»¬äº†è§£åˆ°ï¼Œå¯¹äºä¸€ä¸ªæ™®é€šçš„<code>UIView</code>æ¥è¯´ï¼Œæƒ³å¤„ç†ä¸€ä¸ªè§¦æ‘¸äº‹ä»¶è¿˜çœŸæ˜¯éš¾å‘€ï¼æ¥ä¸‹æ¥ï¼Œæˆ‘å¯¹ç€Demoåˆè¿›è¡Œäº†ä¸€ç•ªæŠ˜è…¾ï¼Œä¸è´Ÿè´£ä»»çš„æœ‰äº†ä»¥ä¸‹çš„æ€»ç»“ï¼š</p>
<blockquote>
<p>1.å½“è§¦æ‘¸äº‹ä»¶å¼€å§‹åï¼Œç³»ç»Ÿä¼šå…ˆå°è¯•åˆ†å‘äº‹ä»¶ï¼Œå¯¹æ•´ä¸ª <code>Window</code>é€’å½’è°ƒç”¨ <code>hitTest</code></p>
<p>2.ç³»ç»Ÿåˆ¤åˆ«è¿”å›çš„ <code>UIView</code>æ˜¯ä¸æ˜¯ <code>UIControl</code>çš„å­ç±»ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œç›´æ¥å°†æ•´ä¸ªè§¦æ‘¸äº‹ä»¶äº¤ä»˜ <code>UIControl</code>å®ä¾‹å®Œæˆ</p>
<p>3.å¦‚æœè¿”å›çš„æ˜¯æ™®é€š <code>UIView</code>,ä¸”æ­¤æ—¶æœ‰ç›¸åº”çš„ <code>UIGestureRecognizer</code>ï¼Œå°†äº‹ä»¶äº¤ç”±è¯¥ <code>recognizer</code>å¤„ç†ï¼Œå¹¶åŒæ­¥èµ° <code>touchesBegan</code>ä»¥åŠ <code>touchesMovde</code>æµç¨‹ï¼Œæœ€ç»ˆç”±ç›¸åº”çš„ <code>recognizer</code>å†³å®šè°ƒç”¨ <code>touchesEnded</code>è¿˜æ˜¯ <code>touchesCancelled</code></p>
<p>4.å°½ç®¡åœ¨ <code>UIGestureRecognizer</code>ä¸­æœ‰ <code>.delaysTouchesBegan</code>è¿™ä¸€å˜é‡ï¼Œä¸”é»˜è®¤è®¾ç½®ä¸º <code>false</code>ï¼Œä½†åœ¨æˆ‘çš„Demoä¸­( <code>UITableView</code>ä¸ <code>Tap</code>çš„å†²çª)ï¼Œç‚¹å‡»äº‹ä»¶<strong>å¿…é¡»</strong>æ˜¯è½»æŒ‰æ‰ä¼šè§¦å‘ <code>UITableView</code>çš„ <code>touchesBegan</code>ï¼Œè€Œç‚¹å‡»å¹¶ä¸ä¼šè§¦å‘ï¼Œå¹¶ä¸” <code>touchesBegan</code>å’Œ <code>hitTest</code>è°ƒç”¨çš„é—´éš”æ˜æ˜¾è¾ƒé•¿ï¼Œè€ŒDemoä¸­çš„ <code>UIButton</code>åˆ™å¯ä»¥åœ¨ç‚¹å‡»åç«‹åˆ»è¿›å…¥ <code>touchesBegan</code>ï¼Œä¸”å…¶è°ƒç”¨ä¸ <code>hitTest</code>æ—¶é—´é—´éš”æ˜æ˜¾çŸ­ä¸€äº›ï¼Œç»“åˆå‰æ–‡<code>TableView</code>çš„è°ƒç”¨æ ˆï¼Œæ„Ÿè§‰è¿™ä¸æ–‡æ¡£ä¸­æ‰€æåˆ°çš„ <code>touchesBegan</code>/ <code>touchesMoved</code>ä¸ <code>gestureRecognizer</code>çŠ¶æ€æ›´æ–°åŒæ­¥ç•¥æœ‰å‡ºå…¥</p>
</blockquote>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee!</div>
  <button onclick="document.querySelector('.post-reward').classList.toggle('active');">
    èµèµ
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.jpeg" alt="Gocy å¾®ä¿¡">
        <span>å¾®ä¿¡</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/iOS/" rel="tag"># iOS</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2016/11/14/calayer-implict-animation/" rel="prev" title="æµ…è°ˆCALayeréšå¼åŠ¨ç”»">
                  <i class="fa fa-chevron-left"></i> æµ…è°ˆCALayeréšå¼åŠ¨ç”»
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2016/12/03/understanding-this-in-js/" rel="next" title="iOS ç¨‹åºå‘˜å¦‚ä½•ç†è§£ JS ä¸­çš„ this">
                  iOS ç¨‹åºå‘˜å¦‚ä½•ç†è§£ JS ä¸­çš„ this <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>







<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Gocy</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
